# 🦖 恐龍模式整合說明

## 📋 **功能概述**

恐龍模式是一個可選功能，用於將大量仙人掌轉換為骨頭。

### 核心機制：
1. 🌵 **仙人掌** → 🍎 **蘋果**（自動購買）
2. 🍎 **蘋果** → 🦴 **尾巴**（移動吃掉）
3. 🦴 **尾巴** → 💎 **骨頭**（n² 收益）

---

## ⚙️ **參數設定**

在 `strategy_zone_harvest.py` 開頭：

```python
# 恐龍模式參數（可選功能）
enable_dinosaur_mode = False  # 設為 True 啟用恐龍模式
dinosaur_mode_trigger_cactus = 5000  # 仙人掌數量達到此值時觸發
dinosaur_target_tail_length = 100  # 目標尾巴長度（50-200推薦）
```

### 參數說明：

#### `enable_dinosaur_mode`
- `False`：不啟用（預設）
- `True`：啟用自動恐龍模式

#### `dinosaur_mode_trigger_cactus`
- 預設：5000 個仙人掌
- 建議：3000-10000
- 說明：仙人掌採收後數量達到此值時自動觸發

#### `dinosaur_target_tail_length`
- 預設：100
- 建議：50-200
- 說明：目標收集的蘋果數量（尾巴長度）

---

## 🔄 **執行流程**

### 1️⃣ 仙人掌採收後檢查
```python
if total_swap_count == 0:
    harvest()  # 連鎖採收仙人掌
    cactus_after = num_items(Items.Cactus)
    
    if enable_dinosaur_mode and cactus_after >= dinosaur_mode_trigger_cactus:
        執行恐龍模式()
```

### 2️⃣ 恐龍模式執行
```python
1. 裝備恐龍帽
2. S型移動收集蘋果（吃蘋果 = 尾巴增長）
3. 達到目標長度後停止
4. 卸下恐龍帽 → 收穫 n² 骨頭
5. 繼續正常農場循環
```

---

## 💎 **收益計算**

### 仙人掌消耗 vs 骨頭收益

| 尾巴長度 | 消耗仙人掌 | 獲得骨頭 | 收益公式 |
|---------|-----------|---------|---------|
| 50 | ~50 | **2,500** | 50² |
| 100 | ~100 | **10,000** | 100² |
| 150 | ~150 | **22,500** | 150² |
| 200 | ~200 | **40,000** | 200² |

### 對比：仙人掌連鎖採收
- 10x10 仙人掌 → 10,000 個仙人掌

### 恐龍模式額外收益：
- 100 個仙人掌 → 10,000 個骨頭
- 骨頭可能有其他用途（解鎖、升級等）

---

## 📊 **完整執行週期**

```
第 1-10 輪：種植、排序仙人掌
  └─ 仙人掌逐漸變綠

第 11 輪：仙人掌採收
  ├─ total_swap_count == 0 → 採收
  ├─ 獲得 10,000 個仙人掌
  └─ 仙人掌總數：10,000+

第 11 輪（續）：恐龍模式觸發 ⭐
  ├─ enable_dinosaur_mode == True
  ├─ cactus_after >= 5000 ✓
  └─ 執行恐龍模式：
      ├─ 裝備恐龍帽
      ├─ 收集 100 個蘋果
      ├─ 尾巴長度 = 100
      ├─ 卸下帽子
      └─ 獲得 10,000 個骨頭！

第 12 輪：重新開始
  └─ 種植新仙人掌
  └─ 開始新的循環
```

---

## 🎯 **使用建議**

### 何時啟用恐龍模式？

#### ✅ **建議啟用**：
- 需要骨頭來解鎖新功能
- 仙人掌過剩（超過10,000）
- 想要多樣化收益

#### ❌ **不建議啟用**：
- 仙人掌不足
- 需要保留仙人掌做其他用途
- 農場循環時間已經很長

---

## ⚠️ **注意事項**

### 1️⃣ **移動速度**
- 裝備恐龍帽後，`move()` 從 200 ticks → 400 ticks
- 每吃一個蘋果，速度提升 3%
- 100 個蘋果後，移動速度顯著提升

### 2️⃣ **農場大小**
- 建議在 22x22 農場執行
- 如果農場太小，可能無法收集足夠的蘋果
- 如果需要更多骨頭，可以提高 `dinosaur_target_tail_length`

### 3️⃣ **資源消耗**
- 每個蘋果消耗仙人掌（具體數量取決於遊戲設定）
- 確保仙人掌足夠才啟用

### 4️⃣ **尾巴碰撞**
- 如果尾巴太長，可能會堵住自己的路徑
- 程式會在移動失敗時自動停止
- 建議 `dinosaur_target_tail_length` 不超過 200

---

## 🚀 **啟用步驟**

### 1. 修改參數
```python
enable_dinosaur_mode = True  # 改為 True
dinosaur_mode_trigger_cactus = 5000  # 根據需求調整
dinosaur_target_tail_length = 100  # 根據需求調整
```

### 2. 執行主程式
```python
python strategy_zone_harvest.py
```

### 3. 等待自動執行
- 程式會正常運行
- 當仙人掌採收後數量足夠
- 自動進入恐龍模式
- 完成後繼續正常循環

---

## 📈 **獨立使用**

如果只想執行恐龍模式（不執行主程式）：

```python
python strategy_dinosaur_mode.py
```

這個獨立程式：
- 檢查仙人掌數量
- 裝備恐龍帽
- 收集蘋果
- 收穫骨頭
- 不會重新種植仙人掌

---

## 🎮 **使用場景**

### 場景 1：自動化全流程
```python
enable_dinosaur_mode = True
dinosaur_mode_trigger_cactus = 5000
```
- 執行主程式
- 自動採收仙人掌
- 自動轉換骨頭
- 完全自動化

### 場景 2：手動控制
```python
enable_dinosaur_mode = False
```
- 執行主程式採收仙人掌
- 暫停程式
- 單獨執行 `strategy_dinosaur_mode.py`
- 手動控制轉換時機

### 場景 3：只採收仙人掌
```python
enable_dinosaur_mode = False
```
- 不使用恐龍模式
- 專注於仙人掌採收
- 保留仙人掌做其他用途

---

## 💡 **優化建議**

### 收益最大化：
1. 等待仙人掌數量達到 10,000+
2. 設定 `dinosaur_target_tail_length = 200`
3. 獲得 40,000 個骨頭

### 時間效率：
1. 設定 `dinosaur_target_tail_length = 50`
2. 快速完成恐龍模式
3. 繼續下一輪仙人掌採收

---

## 🎉 **總結**

恐龍模式是一個強大的可選功能：
- ✅ 將仙人掌轉換為骨頭（n² 收益）
- ✅ 完全自動化（如果啟用）
- ✅ 可手動控制
- ✅ 不影響主程式運行

根據您的需求選擇是否啟用！🦖

