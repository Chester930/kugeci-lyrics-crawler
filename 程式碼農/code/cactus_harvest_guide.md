# 仙人掌採收指南

## 🌵 為什麼不自動採收仙人掌？

### ❌ **錯誤方式：經過就採收**
```python
if can_harvest():
    harvest()  # 只得到 1 個仙人掌
```

**問題**：
- 只得到 **1 個仙人掌**
- 破壞已經排序好的陣列
- 需要重新種植和排序

---

### ✅ **正確方式：等待完全排序後連鎖採收**

```python
# 1. 持續排序直到所有仙人掌變綠色
# 2. 手動採收一個角落的仙人掌
# 3. 觸發連鎖反應，採收整片
```

**收益**：
- 10x10 = 100 個仙人掌 → **100² = 10,000 個仙人掌！** 🎉
- 5x5 = 25 個仙人掌 → **25² = 625 個仙人掌**
- n 個仙人掌 → **n² 個仙人掌**

---

## 📊 採收標準對比

| 採收方式 | 單次收益 | 需重新種植 | 需重新排序 | 推薦度 |
|---------|---------|-----------|-----------|--------|
| 經過就採收 | 1 個 | ✅ 是 | ✅ 是 | ❌ 不推薦 |
| 完全排序後連鎖 | n² 個 | ✅ 是 | ✅ 是 | ⭐⭐⭐⭐⭐ |

---

## 🎯 當前程式策略

### 🚜 **經過模式** (`smart_zone_harvest`)
```python
仙人掌區：
  - 處理草地 → 種植
  - 處理仙人掌 → 跳過（不採收）✅
  - 處理空地 → 補種
  - 澆水
```

### 🔧 **整理模式** (排序階段)
```python
每輪執行 5 次：
  - 橫向排序（檢查北方）
  - 縱向排序（檢查東方）
  - 交替執行
```

---

## 🟢 如何判斷可以採收？

### 視覺判斷：
1. **所有仙人掌都是綠色** = 已完全排序 ✅
2. **有棕色的仙人掌** = 未完全排序 ❌

### 程式判斷：
```python
# 使用 test_cactus_harvest.py 檢查
# 如果所有可採收的仙人掌都已排序，就可以手動採收
```

---

## 📝 採收步驟

### 方法 1：手動採收（推薦）
1. 執行 `strategy_zone_harvest.py` 直到所有仙人掌變綠色
2. 暫停程式
3. 手動移動到仙人掌區的**右上角** (15, 15)
4. 執行 `harvest()`
5. 觸發連鎖採收，獲得 100² = 10,000 個仙人掌！
6. 重新執行程式，重新種植和排序

### 方法 2：自動檢測採收（高級）
```python
# 需要檢查整片仙人掌是否都已排序
# 檢查所有仙人掌的顏色或排序狀態
# 如果全部綠色，採收右上角觸發連鎖
```

---

## 🔍 排序完成的判斷

仙人掌已排序的條件（根據官方文檔）：
- **北方和東方**的仙人掌 >= 當前大小
- **南方和西方**的仙人掌 <= 當前大小
- **所有鄰居都已成熟**

排序完成的標誌：
- 🟢 **綠色** = 此仙人掌符合排序條件
- 🟤 **棕色** = 此仙人掌不符合排序條件

---

## 💡 最佳實踐

1. ✅ **讓程式持續排序**，不要自動採收
2. ✅ **定期檢查**仙人掌狀態（使用 `test_cactus_harvest.py`）
3. ✅ **等待全部變綠**再手動採收
4. ✅ **從右上角採收**觸發連鎖（因為排序目標是右上最大）
5. ✅ **採收後重新種植**，繼續循環

---

## 🎮 當前程式行為

```
輪次 1-N：
  ├─ 經過模式：種植、澆水、維護（不採收仙人掌）
  └─ 整理模式：排序 5 次循環

結果：仙人掌逐漸變綠色，等待手動採收
```

✨ **完全排序後，手動採收一次即可獲得 10,000 個仙人掌！**

